# Web管理画面 使い方ガイド

## 🌐 概要

Web管理画面は、キーワード・ジャンル・公開URLをブラウザから簡単に管理できるツールです。

## 🚀 起動方法

```bash
cd /Users/sukofi/Desktop/seo_rank_checker
python3 web_admin.py
```

起動後、以下のURLにアクセスしてください：
- **http://localhost:5000**

## 📋 機能一覧

### 1. キーワード一覧・編集画面 (/)

#### できること
- 全キーワードを表形式で表示
- 各キーワードの情報を編集
  - **ジャンル**: テキスト入力（既存ジャンルから選択可能）
  - **公開URL**: 内部リンク提案時に使用するページURL
  - **優先度**: 高・中・低から選択
  - **メモ**: 自由記入欄
- リアルタイム検索・フィルタリング
- 編集内容を一括保存

#### 使い方
1. トップページにアクセス
2. 編集したいキーワードの行を見つける
3. 各フィールドを直接編集
4. 「保存」ボタンをクリック

#### 便利な機能
- **検索**: キーワード名で検索
- **ジャンルフィルター**: 特定のジャンルのみ表示
- **URLフィルター**: URL登録済み/未登録で絞り込み
- **キーボードショートカット**: `Ctrl+S` (または `Cmd+S`) で保存

### 2. CSV一括インポート画面 (/import)

#### できること
- CSVファイルをアップロードして一括登録
- 列のマッピングを指定（ジャンル、KW、URL）
- 既存キーワードの上書き更新

#### 使い方
1. 「CSVインポート」タブをクリック
2. CSVファイルを選択
3. 列のマッピングを確認（デフォルト値が設定済み）
4. 「インポート実行」ボタンをクリック

#### 対応CSV形式

```csv
ジャンル,KW,URL
時計,ロレックス デイトナ,https://example.com/rolex-daytona
時計,オメガ スピードマスター,https://example.com/omega-speedmaster
金・貴金属,プラチナ 買取,https://example.com/platinum
金・貴金属,金 相場,
```

**注意事項:**
- 1行目が空の場合、2行目をヘッダーとして認識します
- URL列は任意です（空欄でもOK）
- 既存のキーワードは上書きされます
- UTF-8エンコーディングを推奨します
- 最大ファイルサイズ: 16MB

### 3. API エンドポイント (/api/keywords)

#### できること
- キーワード情報をJSON形式で取得
- プログラムから直接アクセス可能

#### 使い方

```bash
# 全キーワードを取得
curl http://localhost:5000/api/keywords

# 特定ジャンルのキーワードを取得
curl "http://localhost:5000/api/keywords?genre=時計"
```

**レスポンス例:**
```json
{
  "success": true,
  "count": 693,
  "keywords": [
    {
      "keyword": "ロレックス デイトナ",
      "genre": "時計",
      "url": "https://example.com/rolex-daytona",
      "priority": "高",
      "notes": "",
      "created_at": "2026-02-03T12:00:00",
      "updated_at": "2026-02-03T12:00:00"
    }
  ]
}
```

## 📊 ダッシュボード統計

トップページでは以下の統計情報を確認できます：

- **総キーワード数**: データベースに登録されている総キーワード数
- **ジャンル数**: 登録されているジャンルの数
- **URL登録済み**: 公開URLが設定されているキーワードの数

## 🎨 UI/UX の特徴

- **モダンなデザイン**: Bootstrap 5を使用
- **レスポンシブ**: スマートフォンやタブレットでも快適に操作可能
- **視認性の高い配色**: グラデーションと影を使用した美しいデザイン
- **スクロール対応**: 大量のキーワードでもスムーズに操作
- **フラッシュメッセージ**: 操作結果を分かりやすく通知

## 🔧 トラブルシューティング

### 起動できない

```bash
# Flaskがインストールされているか確認
python3 -c "import flask; print(flask.__version__)"

# インストールされていない場合
pip install Flask>=3.0.0
```

### ポート5000が既に使用されている

web_admin.pyの最後の行を編集：

```python
app.run(host='0.0.0.0', port=8080, debug=True)  # ポートを8080に変更
```

### データベースが見つからない

データベースファイルが存在するか確認：

```bash
ls -la rankings.db
```

存在しない場合は、まずキーワードをインポート：

```bash
python3 import_csv.py <csv_file_path>
```

## 📝 よくある質問

### Q: 編集内容はいつ保存されますか？
A: 「保存」ボタンをクリックした時点で、データベースに保存されます。

### Q: CSVインポートで既存データは上書きされますか？
A: はい。同じキーワードが存在する場合、ジャンル・URL等の情報が更新されます。

### Q: URL列は必須ですか？
A: いいえ、オプションです。空欄のままでも問題ありません。内部リンク提案時に使用されます。

### Q: 複数人で同時に編集できますか？
A: 技術的には可能ですが、最後に保存した人の内容が反映されます。チーム作業の場合は調整が必要です。

### Q: Web管理画面を外部からアクセスできるようにしたい
A: セキュリティリスクがあるため推奨しませんが、`app.run(host='0.0.0.0')`で外部アクセスが可能です。本番環境ではNginx + Gunicornの使用を推奨します。

## 🔐 セキュリティ

- **ローカル環境専用**: デフォルトではローカルホストのみアクセス可能
- **認証なし**: 現在、認証機能は実装されていません
- **本番環境非推奨**: 社内ツールとして設計されており、本番環境での使用は推奨しません

## 📞 サポート

問題が発生した場合は、以下を確認してください：

1. ターミナルのエラーメッセージ
2. ブラウザのコンソール（F12で開く）
3. データベースファイルの存在確認
4. Flaskのバージョン

---

**作成日**: 2026-02-03  
**バージョン**: v1.0  
**対応環境**: macOS, Python 3.11+, Flask 3.0+
